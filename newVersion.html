<!DOCTYPE html>
<html>
<head>
<title>learnCSS</title>
<meta charset='utf-8'/>
<style type="text/css">
html, body { height:100%; }
body    { color:#d8f8b3; background:#171814; margin:0; font:12px arial; }
a       { color:#d8f8b3; text-decoration:none; }
a:hover { color:#e6bf4d; text-decoration:underline; }

#panel { position:absolute; top:0; bottom:0; overflow:auto; width:280px; padding:0 10px 50px 10px; border-right:2px solid #111; background:#222; }
#panel h2 { margin:22px 0 5px 0; font-size:16px; color:#a6e22e; }
#panel a          { display:block; font:12px consolas; padding:2px 4px; border-radius:2px; }
#panel a:hover    { text-decoration:none; background:#2a2a2a; }
#panel a.selected { font-weight:bold; background:#333; }

#columnRight { position:absolute; left:300px; right:0; }

#help { padding:20px 10px; border-bottom:1px dashed #444; }
#help:before { color:#a6e22e; font-weight:bold; content:'/* Aide : '; }
#help:after  { color:#a6e22e; font-weight:bold; content:' */'; }
#help:empty:after { font-weight:normal; content:'... */'; }

#demoCode { display:none; }
#html  { margin:20px 0 0 10px; font:12px consolas; }

.node.tB:before   { content:'\3C/'; }
.node.tA:before   { content:'\3C';  }
.node.tA:after,
.node.tB:after    { content:'\3E' ; }
.node.tA.tB:after { content:'/\3E'; }
.node         { color:#f8f8f2; margin-left:1px; border-radius:2px; border:1px solid transparent; }
.node.text    { color:#f8f8f2; }
.node.comment { color:#75715e; }
.node .tag    { color:#f92672; }
.node .attr   { color:#a6e22e; }
.node .value  { color:#e6db74; }
#html.selected .node          { opacity:0.33; }
#html.selected .node.selected { opacity:1; background:#222; border-color:#333; }
</style>
<script type="text/javascript" src="http://mr21.github.io/JsExt/ClassName-1.0.js"></script>
<script type="text/javascript">

function lg(s) { console.log(s); }

function isOrphanTag(tag) {
	return tag === 'INPUT'
		|| tag === 'IMG'
		|| tag === 'BR'
		|| tag === 'HR';
}

var htmlDiv;
var demoCode;
var attrs = ['class', 'title', 'href', 'id', 'lang', 'type', 'name', 'src', 'alt'];

function writeNode(node, open) {
	var isOrphan;
	if ((node.nodeType === 1 && !(isOrphan = isOrphanTag(node.tagName))) || open) {
		var span = document.createElement('span');
		var span_innerHTML = '';
		switch (node.nodeType) {
			case Node.ELEMENT_NODE :
				var clssOpen = !open ? 'tB' : (isOrphan ? 'tA tB' : 'tA');
				span.className = 'node ' + clssOpen;
				span_innerHTML = '<span class="tag">' + node.tagName.toLowerCase() + '</span>';
				if (open) {
					var v;
					for (var i = 0, a; a = attrs[i]; ++i)
						if ((v = node.getAttribute(a)) || v === '')
							span_innerHTML += ' <span class="attr">' + a + '</span>=<span class="value">"' + v + '"</span>';
				}
			break;
			case Node.TEXT_NODE :
				span.className = 'node text';
				for (var i = 0, c; c = node.data[i]; ++i) {
					switch (c) {
						default   : span_innerHTML += c; break;
						case '\n' : span_innerHTML += '<br/>'; break;
						case '\t' : span_innerHTML += '&nbsp;&nbsp;&nbsp;&nbsp;'; break;
					}
				}
			break;
			case Node.COMMENT_NODE :
				span.className = 'node comment';
				span_innerHTML = '&lt;!-- ' + node.data + ' --&gt;';
			break;
		}
		span.innerHTML = span_innerHTML;
		htmlDiv.appendChild(span);
		return span;
	}
	return null;
}

function list(node) {
	for (; node !== null; node = node.nextSibling) {
		node._span = [];
		node._span[0] = writeNode(node, 1);
		list(node.firstChild);
		node._span[1] = writeNode(node, 0);
	}
}

function selectDOM(selector) {
	var fn;
	if (!selector) {
		fn = '_delClass';
	} else {
		fn = '_addClass';
		selectDOM.elems = demoCode.querySelectorAll(selector);
	}
	if (selectDOM.elems) {
		htmlDiv[fn]('selected');
		for (var i = 0, e; e = selectDOM.elems[i]; ++i) {
			if (e._span[0]) e._span[0][fn]('selected');
			if (e._span[1]) e._span[1][fn]('selected');
		}
		if (!selector)
			selectDOM.elems = null;
	}
}

window.onload = function() {
	htmlDiv  = document.getElementById('html');
	demoCode = document.getElementById('demoCode');
	var helpDiv = document.getElementById('help');
	list(demoCode.firstChild);
	var links = document.getElementById('panel').getElementsByTagName('a');
	var linkSelected = null;
	for (var i = 0, a; a = links[i]; ++i) {
		a.onclick = function() {
			selectDOM();
			if (linkSelected)
				linkSelected._delClass('selected');
			if (linkSelected === this) {
				linkSelected = null;
				helpDiv.innerHTML = '';
			} else {
				this._addClass('selected');
				helpDiv.innerHTML = this.getAttribute('data');
				selectDOM(this.innerHTML.replace(/&gt;/g, '>'));
				linkSelected = this;
			}
			return false;
		};
	}
};
</script>
</head>
<body>

<div id="panel">
	<h2>tags selectors</h2>
		<a href="#" data="L'étoile sélectionne absolument tous les éléments du DOM même les balises <i>head</i>, <i>script</i>, etc.">*</a>
		<a href="#" data="Sélection de tous les <i>a</i> du document">a</a>
		<a href="#" data="Sélection de tous les <i>span</i> du document">span</a>
		<a href="#" data="Sélection de tous les <i>strong</i> du document">strong</a>
	<h2>parents combinators</h2>
		<a href="#" data="Sélection des <i>strong</i> ayant un parent (ou grand-parent) de type <i>span</i>">span strong</a>
		<a href="#" data="Sélection des <i>strong</i> ayant comme parent direct un <i>span</i>">span &gt; strong</a>
		<a href="#" data="Sélection de tous les éléments ayant un parent (ou grand-parent) de type <i>span</i>">span *</a>
		<a href="#" data="Sélection de tous les éléments ayant comme parent direct un <i>span</i>">span &gt; *</a>
		<a href="#" data="Sélection des <i>span</i> ayant comme parent un <i>li</i>, comme grand-parent un <i>ul</i>, etc. sont sélectionnés">div &gt; div &gt; ul &gt; li &gt; span</a>
		<a href="#" data="Sélection des <i>em</i> ayant comme parent direct un <i>p</i> qui à son tour a un parent ou grand-parent de type <i>li</i>">li p &gt; em</a>
		<a href="#" data="Sélection des <i>em</i> ayant comme parent direct un <i>p</i> qui à son tour a un parent ou grand-parent de type <i>ul</i>">ul p &gt; em</a>
		<a href="#" data="Sélection des <i>em</i> ayant comme arrière-grand-parent un <i>div</i>">div &gt; * &gt; * &gt; em</a>
	<h2>brothers combinators</h2>
		<a href="#" data="Sélection des <i>h3</i> étant directement en dessous d'un <i>ul</i>">ul + h3</a>
		<a href="#" data="Sélection de tous les <i>h3</i> étant au même rang et en dessous d'un <i>ul</i> (« The Twins » n'est donc pas sélectionnés)">ul ~ h3</a>
		<a href="#" data="Sélection des <i>li</i> contenus dans les listes précédés d'un <i>h3</i>">h3 + * &gt; li</a>
	<h2>grouping</h2>
		<a href="#" data="Sélection de tous les <i>a</i> et tous les <i>span</i>">a, span</a>
		<a href="#" data="À cause de l'erreur de syntaxe aucun des <i>a</i> ou autres <span> n'est sélectionnés">a, syntax # error, span</a>
		<a href="#" data="Grouping inutile car l'étoile sélectionne tous les éléments d'un coup">a, *, span</a>
	<h2>.class/#id selectors</h2>
		<a href="#" data="Sélection de tous les éléments ayant la classe « clssA »">.clssA</a>
		<a href="#" data="Sélection des <i>span</i> ayant la classe « clssA »">span.clssA</a>
		<a href="#" data="Sélection des <i>span</i> ayant les classes « clssA » et « clssB »">span.clssA.clssB</a>
		<a href="#" data="Sélection de l'élément ayant l'id « idA »">#idA</a>
		<a href="#" data="Sélection du <i>div</i> ayant l'id « idA »">div#idA</a>
		<a href="#" data="Sélection du <i>div</i> ayant l'id « idA » et la classe « clssC »">div#idA.clssC</a>
	<h2>attributes selectors</h2>
		<a href="#" data="Sélection des <i>a</i> ayant un attribut « title »">a[title]</a>
		<a href="#" data="Sélection des <i>a</i> ayant un attribut « href » avec pour valeur « # »">a[href='#']</a>
		<a href="#" data="Sélection des <i>a</i> ayant un attribut « href » dont la valeur commence par « https:// »">a[href^='https://']</a>
		<a href="#" data="Sélection des <i>a</i> ayant un attribut « href » dont la valeur termine par « .com »">a[href$='.com']</a>
		<a href="#" data="Sélection des <i>a</i> ayant un attribut « href » contenant « google »">a[href*='google']</a>
		<a href="#" data="Sélection des éléments ayant le mot « clssA » dans l'attribut « class »">*[class~='clssA']</a>
		<a href="#" data="Sélection des éléments ayant un attribut « lang » avec pour valeur « fr » ou commencant par « fr- »">[lang|='fr']</a>
		<a href="#" data="Il est possible de cumuler autant de filtres qu'il y a besoin">a[href^='https://'][href*='google']</a>
	<h2>pseudo-classes</h2>
		<a href="#" data="Sélection des <i>span</i> qui se trouvent être le premier enfant de leur parent">span:first-child</a>
		<a href="#" data="Sélection des <i>span</i> qui se trouvent être le dernier enfant de leur parent">span:last-child</a>
		<a href="#" data="Sélection des <i>span</i> qui se trouvent être à la fois le premier et le dernier enfant de leur parent (similaire à « span:first-child:last-child »)">span:only-child</a>
		<a href="#" data="Sélection des <i>span</i> qui se trouvent être le deuxième enfant de leur parent (« Trinity » et « Colt » ne sont donc pas sélectionnés)">span:nth-child(2)</a>
		<a href="#" data="Sélection des <i>span</i> qui se trouvent être l'avant-dernier enfant de leur parent (« Neo » et « Maggie » ne sont donc pas sélectionnés)">span:nth-last-child(2)</a>
		<a href="#" data="Sélection de tous les éléments n'ayant absolument aucun enfant ni même aucun text, seul les commentaires HTML seront ignorés">:empty</a>
		<a href="#" data="Sélection du premier enfant de type <i>span</i> de chaque élément">span:first-of-type</a>
		<a href="#" data="Sélection du dernier enfant de type <i>span</i> de chaque élément">span:last-of-type</a>
		<a href="#" data="Équivalent de « span:first-of-type:last-of-type; »">span:only-of-type</a>
		<a href="#" data="Sélection du deuxième <i>span</i> de chaque élément">span:nth-of-type(2)</a>
		<a href="#" data="Sélection de l'avant-dernier <i>span</i> de chaque élément">span:nth-last-of-type(2)</a>
</div>

<div id="columnRight">
	<div id="help"></div>
	<div id="html"></div>
</div>

<div id="demoCode"><div>
	<span>Neo<strong>The Oracle<strong>Niobe</strong></strong></span>
	<strong lang="francais">Strong</strong>
	<span class="clssA">Trinity<em lang="fr">SpoonBoy</em></span>
	<p lang="fr-Francais">Mouse</p>
	<div class="clssA clssB clssC">
		<input type="text" name="user"/>
		<h3 class="clssB clssA"><span>Switch<em>Persephone</em></span></h3>
		<ul>
			<li><p><em>Mifune</em></p><a href="#" lang="fr-">Ghost</a></li>
			<li><span class="clssB clssA">The Keymaker</span><a href="http://google.com">Tank</a></li>
			<li><p class="clssA"><a href="https://google.com/"><em>Dozer</em></a></p></li>
			<li><a href="#" title="hash">Link</a><span>The Architect</span></li>
			<li><div id="idA" class="clssC"><p><em>Lock</em></p></div><a href="https://github.com">Kid</a></li>
			<li><a href="/" title="">Bane</a><span>Maggie</span><span>Colt</span><h2></h2></li>
		</ul>
		<h3>Cypher</h3>
		<ol>
			<li><em>Seraph</em><p><em>Apok</em></p></li>
		</ol>
		<h3 class="clssA">Ballard</h3>
		<h2><!-- Commentaire --></h2>
		<ul>
			<li><em>The Merovingian</em><h3>The Twins</h3></li>
			<li><span>Sati</span></li>
		</ul>
		<span>Roland</span>
	</div>
</div></div>

</body>
</html>
